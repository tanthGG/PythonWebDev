{% extends 'myapp/base.html' %}
{% load static %}

{% block myheader %}{% endblock myheader %}

{% block content %}
<script src="https://cdn.tailwindcss.com"></script>

<section class="bg-gradient-to-br from-slate-100 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-slate-900">
  <div class="mx-auto max-w-6xl px-4 py-16 sm:px-6 lg:px-8 lg:py-20">
    <div class="flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between">
      <div class="max-w-xl space-y-4">
        <span class="inline-flex items-center gap-2 rounded-full bg-blue-600/10 px-4 py-1 text-sm font-medium text-blue-700 dark:bg-blue-500/10 dark:text-blue-200">
          Admin queue
        </span>
        <h1 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl">Incoming messages</h1>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          Review every inquiry, update the status, and follow up with riders. Click a row to view or update actions.
        </p>
      </div>
      <div class="flex items-center gap-4 self-start rounded-2xl border border-blue-100 bg-white px-5 py-4 text-sm font-medium text-blue-700 shadow-lg shadow-blue-200/40 dark:border-blue-500/30 dark:bg-gray-900 dark:text-blue-200 dark:shadow-blue-900/30">
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="M5.25 5.25h13.5A2.25 2.25 0 0 1 21 7.5v9a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 16.5v-9a2.25 2.25 0 0 1 2.25-2.25Zm0 0 6.09 6.09a1.5 1.5 0 0 0 2.12 0L18.75 5.25" />
        </svg>
        {{ contact|length }} total requests
      </div>
    </div>

    <div class="mt-10 overflow-hidden rounded-3xl border border-white/60 bg-white/90 shadow-2xl shadow-blue-200/30 backdrop-blur dark:border-white/10 dark:bg-gray-900/80 dark:shadow-blue-900/30">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 text-left text-sm dark:divide-gray-700">
          <thead class="bg-blue-50/80 text-xs font-semibold uppercase tracking-wide text-gray-600 dark:bg-gray-800 dark:text-gray-300">
            <tr>
              <th scope="col" class="px-6 py-3">#</th>
              <th scope="col" class="px-6 py-3">Topic</th>
              <th scope="col" class="px-6 py-3">Email</th>
              <th scope="col" class="px-6 py-3">Detail</th>
              <th scope="col" class="px-6 py-3 text-right">Status</th>
              <th scope="col" class="px-6 py-3 text-right">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100 bg-white text-gray-700 dark:divide-gray-800 dark:bg-gray-900 dark:text-gray-200">
            {% for data in contact %}
            <tr class="transition hover:bg-blue-50/70 dark:hover:bg-gray-800">
              <td class="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">{{ forloop.counter }}</td>
              <td class="px-6 py-4 font-semibold text-gray-900 dark:text-white">
                <a href="{% url 'action-page' data.id %}" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                  {{ data.topic }}
                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="m9 5 7 7-7 7" />
                  </svg>
                </a>
              </td>
              <td class="px-6 py-4">
                <a href="mailto:{{ data.email }}" class="text-sm text-gray-600 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400">
                  {{ data.email }}
                </a>
              </td>
              <td class="px-6 py-4">
                <p class="text-sm text-gray-600 dark:text-gray-300 line-clamp-2">{{ data.detail }}</p>
              </td>
              <td class="px-6 py-4 text-right">
                {% if data.complete %}
                <span class="inline-flex items-center gap-1 rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200">
                  <span class="h-2 w-2 rounded-full bg-emerald-500"></span> Done
                </span>
                {% else %}
                <span class="inline-flex items-center gap-1 rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-700 dark:bg-amber-500/20 dark:text-amber-200">
                  <span class="h-2 w-2 rounded-full bg-amber-500"></span> Pending
                </span>
                {% endif %}
              </td>
              <td class="px-6 py-4 text-right">
                <a href="{% url 'action-page' data.id %}" class="inline-flex items-center gap-2 rounded-full border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-600 transition hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800">
                  Update
                  <svg class="h-3 w-3" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="m9 5 7 7-7 7" />
                  </svg>
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="6" class="px-6 py-10 text-center text-sm text-gray-500 dark:text-gray-400">
                No contact messages yet. Check back soon!
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
{% endblock content %}
