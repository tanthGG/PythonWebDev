{% extends 'myapp/base.html' %}
{% load static %}

{% block myheader %}{% endblock myheader %}

{% block content %}
<script src="https://cdn.tailwindcss.com"></script>

<section class="relative overflow-hidden bg-gradient-to-br from-sky-100 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-slate-900">
  <div class="absolute inset-x-0 top-0 flex justify-center">
    <div class="h-72 w-[85%] max-w-5xl rounded-full bg-blue-200/50 blur-3xl dark:bg-blue-500/20"></div>
  </div>
  <div class="relative mx-auto flex max-w-6xl flex-col gap-16 px-4 py-16 sm:px-6 lg:px-8 lg:py-24">
    <div class="max-w-3xl space-y-6 text-center lg:text-left">
      <span class="mx-auto inline-flex items-center gap-2 rounded-full bg-blue-600/10 px-4 py-1 text-sm font-medium text-blue-700 dark:bg-blue-500/10 dark:text-blue-200 lg:mx-0">
        Our story
      </span>
      <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 dark:text-white sm:text-5xl lg:text-6xl">
        Phuket’s original ATV adventure crew
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-300">
        Since 2005 we’ve been guiding riders through Phuket’s lush hillsides, rubber plantations, and hidden viewpoints. What began as a small group of local guides with a handful of quads has grown into the island’s most trusted ATV experience, proudly led by safety-certified instructors and passionate nature lovers.
      </p>
    </div>

    <div class="grid gap-10 lg:grid-cols-3">
      <div class="lg:col-span-2 space-y-8">
        <div class="rounded-3xl border border-white/60 bg-white/90 p-8 shadow-2xl shadow-blue-200/40 backdrop-blur dark:border-white/10 dark:bg-gray-900/80 dark:shadow-blue-900/30">
          <h2 class="text-2xl font-semibold text-gray-900 dark:text-white">Why riders choose ATVPhuket.com</h2>
          <p class="mt-4 text-gray-600 dark:text-gray-300">
            Every ride is designed to balance thrill and comfort. From the moment you arrive, our team walks you through a hands-on safety briefing, fits your gear, and pairs you with the right vehicle. Trails are scouted daily to keep conditions safe while still delivering that adrenaline rush you came for.
          </p>
        </div>

        <div class="rounded-3xl border border-white/60 bg-white/90 p-8 shadow-2xl shadow-blue-200/40 backdrop-blur dark:border-white/10 dark:bg-gray-900/80 dark:shadow-blue-900/30">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white">What we stand for</h3>
          <ul class="mt-4 space-y-3 text-gray-600 dark:text-gray-300">
            <li class="flex items-start gap-3">
              <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white">1</span>
              <div>
                <p class="font-semibold text-gray-900 dark:text-white">Safety first</p>
                <p>Certified guides, well-maintained ATVs, and small group ratios keep every ride controlled and enjoyable.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white">2</span>
              <div>
                <p class="font-semibold text-gray-900 dark:text-white">Authentic local routes</p>
                <p>We partner with local communities to open access to trails you won’t find on a map.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white">3</span>
              <div>
                <p class="font-semibold text-gray-900 dark:text-white">Eco respect</p>
                <p>Minimal-impact routes and ongoing reforestation programs help us preserve the jungle we ride through.</p>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <aside class="space-y-6">
        <div class="rounded-3xl border border-white/60 bg-white/90 p-6 shadow-xl shadow-blue-100/50 backdrop-blur dark:border-white/10 dark:bg-gray-900/80 dark:shadow-blue-900/30">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">By the numbers</h3>
          <dl class="mt-4 space-y-4 text-sm text-gray-600 dark:text-gray-300">
            <div class="flex items-center justify-between rounded-2xl bg-blue-50 px-4 py-3 text-base font-semibold text-blue-700 dark:bg-blue-900/30 dark:text-blue-200">
              <dt>Total riders hosted</dt>
              <dd>45,000+</dd>
            </div>
            <div class="flex items-center justify-between rounded-2xl bg-blue-50 px-4 py-3 text-base font-semibold text-blue-700 dark:bg-blue-900/30 dark:text-blue-200">
              <dt>Guides on the team</dt>
              <dd>{% if staff_count %}{{ staff_count }}{% else %}—{% endif %}</dd>
            </div>
            <div class="flex items-center justify-between rounded-2xl bg-blue-50 px-4 py-3 text-base font-semibold text-blue-700 dark:bg-blue-900/30 dark:text-blue-200">
              <dt>Average guide experience</dt>
              <dd>
                {% if avg_experience %}
                  {{ avg_experience|floatformat:1 }} yrs
                {% else %}
                  —
                {% endif %}
              </dd>
            </div>
          </dl>
        </div>

        <div class="rounded-3xl border border-white/60 bg-gradient-to-br from-blue-600 to-indigo-600 p-6 text-white shadow-xl shadow-blue-500/40 backdrop-blur dark:border-blue-500/10">
          <h3 class="text-lg font-semibold">Ready to ride with us?</h3>
          <p class="mt-2 text-blue-100">
            Check out our latest packages or talk to our crew about a custom route for your group.
          </p>
          <div class="mt-4 flex flex-wrap gap-3">
            <a href="{% url 'home' %}#packages" class="inline-flex items-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-blue-700 shadow hover:bg-blue-50">
              Browse adventures
            </a>
            <a href="{% url 'contact-page' %}" class="inline-flex items-center rounded-full border border-white/40 px-4 py-2 text-sm font-semibold text-white transition hover:bg-white hover:text-blue-700">
              Talk to our team
            </a>
          </div>
        </div>
      </aside>
    </div>

    {% if staff_members %}
    <div class="rounded-3xl border border-white/60 bg-white/90 p-8 shadow-2xl shadow-blue-200/40 backdrop-blur dark:border-white/10 dark:bg-gray-900/80 dark:shadow-blue-900/30">
      <div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between">
        <div>
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Meet our guides</h2>
          <p class="mt-3 text-gray-600 dark:text-gray-300">
            {% if staff_count %}
              Our core team of {{ staff_count }} Phuket locals grew up on these trails. They’re certified in first aid and defensive driving, and they speak multiple languages so you’ll feel welcome from the first handshake.
            {% else %}
              Our core team is made up of Phuket locals who grew up on these trails. They’re certified in first aid and defensive driving, and they speak multiple languages so you’ll feel welcome from the first handshake.
            {% endif %}
          </p>
        </div>
        <a href="{% url 'booking-page' %}" class="inline-flex items-center justify-center rounded-full bg-[#80BCBD] px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-[#80BCBD]/40 transition hover:bg-[#6AA4A5] focus:outline-none focus:ring-4 focus:ring-[#AAD9BB]">
          Book a ride with our crew
          <svg class="ms-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 5 7 7-7 7" />
          </svg>
        </a>
      </div>
      <div class="mt-8 grid gap-6 sm:grid-cols-2 xl:grid-cols-3">
        {% for staff in staff_members %}
        <article class="flex h-full flex-col rounded-2xl border border-[#D5F0C1] bg-white/90 p-6 shadow-lg shadow-[#D5F0C1]/60 transition hover:-translate-y-1 hover:shadow-2xl hover:shadow-[#AAD9BB]/60 dark:bg-gray-900/80">
          <div class="flex items-center gap-4">
            {% if staff.avatar %}
            <img src="{{ staff.avatar.url }}" alt="{{ staff.name }}" class="h-16 w-16 rounded-full object-cover ring-4 ring-[#F9F7C9]" />
            {% else %}
            <div class="flex h-16 w-16 items-center justify-center rounded-full bg-[#80BCBD] text-xl font-semibold text-white ring-4 ring-[#D5F0C1]">
              {{ staff.nickname|default:staff.name|first|upper }}
            </div>
            {% endif %}
            <div>
              {% if staff.role %}
              <p class="text-xs font-semibold uppercase tracking-wide text-[#35605A]">{{ staff.role }}</p>
              {% endif %}
              <h3 class="text-lg font-bold text-gray-900 dark:text-white">{{ staff.name }}</h3>
              {% if staff.nickname %}
              <p class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">“{{ staff.nickname }}”</p>
              {% endif %}
              {% if staff.years_experience %}
              <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">{{ staff.years_experience }} years guiding</p>
              {% endif %}
            </div>
          </div>
          {% if staff.bio %}
          <p class="mt-4 text-sm text-gray-600 dark:text-gray-300">{{ staff.bio }}</p>
          {% endif %}
          <dl class="mt-4 space-y-3 text-sm text-gray-600 dark:text-gray-300">
            {% if staff.likes %}
            <div class="flex gap-3">
              <span class="mt-1 h-2.5 w-2.5 flex-shrink-0 rounded-full bg-[#80BCBD]"></span>
              <div>
                <dt class="font-semibold text-gray-900 dark:text-white">Trail favorites</dt>
                <dd class="mt-1 leading-relaxed">{{ staff.likes|linebreaksbr }}</dd>
              </div>
            </div>
            {% endif %}
          {% if staff.dislikes %}
          <div class="flex gap-3">
            <span class="mt-1 h-2.5 w-2.5 flex-shrink-0 rounded-full bg-[#AAD9BB]"></span>
            <div>
              <dt class="font-semibold text-gray-900 dark:text-white">Always watching for</dt>
              <dd class="mt-1 leading-relaxed">{{ staff.dislikes|linebreaksbr }}</dd>
            </div>
          </div>
          {% endif %}
        </dl>
        {% if user.is_authenticated %}
        <div class="mt-6 border-t border-[#D5F0C1] pt-4">
          <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400">Share your feedback</p>
          <div class="mt-3 flex flex-wrap gap-3">
            <form method="post" action="{% url 'staff-feedback' staff.id %}">
              {% csrf_token %}
              <input type="hidden" name="next" value="{{ request.get_full_path }}">
              <input type="hidden" name="sentiment" value="like">
              <button type="submit" class="inline-flex items-center gap-2 rounded-full bg-[#80BCBD] px-4 py-2 text-xs font-semibold text-white shadow-sm shadow-[#80BCBD]/40 transition hover:bg-[#6AA4A5] focus:outline-none focus:ring-2 focus:ring-[#AAD9BB]">
                Like
              </button>
            </form>
            <form method="post" action="{% url 'staff-feedback' staff.id %}">
              {% csrf_token %}
              <input type="hidden" name="next" value="{{ request.get_full_path }}">
              <input type="hidden" name="sentiment" value="dislike">
              <button type="submit" class="inline-flex items-center gap-2 rounded-full border border-[#F9F7C9] px-4 py-2 text-xs font-semibold text-[#7A7310] transition hover:bg-[#F9F7C9] focus:outline-none focus:ring-2 focus:ring-[#F9F7C9]">
                Needs work
              </button>
            </form>
          </div>
          <form method="post" action="{% url 'staff-feedback' staff.id %}" class="mt-4 space-y-2">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}">
            <textarea name="comment" rows="3" maxlength="600" class="w-full resize-none rounded-2xl border border-[#D5F0C1] bg-white/80 px-3 py-2 text-sm text-gray-700 focus:border-[#80BCBD] focus:ring-[#80BCBD]" placeholder="Share a quick note about {{ staff.name }} for our training team"></textarea>
            <div class="flex items-center justify-between">
              <p class="text-xs text-gray-500 dark:text-gray-400">Feedback goes to management only.</p>
              <button type="submit" class="inline-flex items-center rounded-full bg-[#80BCBD] px-4 py-2 text-xs font-semibold text-white shadow-sm shadow-[#80BCBD]/40 transition hover:bg-[#6AA4A5] focus:outline-none focus:ring-2 focus:ring-[#AAD9BB]">
                Send feedback
              </button>
            </div>
          </form>
        </div>
        {% else %}
        <p class="mt-6 rounded-2xl bg-[#AAD9BB]/30 px-4 py-3 text-xs text-[#35605A] dark:bg-[#AAD9BB]/20 dark:text-[#D5F0C1]">Log in to like or leave a private note about our crew.</p>
        {% endif %}
        {% if staff.comment %}
        <p class="mt-5 rounded-2xl bg-[#F9F7C9] p-4 text-sm italic text-[#4D4700]">“{{ staff.comment }}”</p>
        {% endif %}
      </article>
      {% endfor %}
      </div>
    </div>
    {% else %}
    <div class="rounded-3xl border border-white/60 bg-white/90 p-8 text-center shadow-2xl shadow-blue-200/40 backdrop-blur dark:border-white/10 dark:bg-gray-900/80 dark:shadow-blue-900/30">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Meet our guides</h2>
      <p class="mt-3 text-gray-600 dark:text-gray-300">We’re refreshing our guide profiles right now. Reach out to learn more about who will lead your ride.</p>
      <a href="{% url 'contact-page' %}" class="mt-6 inline-flex items-center justify-center rounded-full bg-[#80BCBD] px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-[#80BCBD]/40 transition hover:bg-[#6AA4A5] focus:outline-none focus:ring-4 focus:ring-[#AAD9BB]">
        Contact our team
      </a>
    </div>
    {% endif %}
  </div>
</section>
{% endblock content %}
