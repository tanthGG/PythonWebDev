{% extends 'myapp/base.html' %}
{% block content %}
<script src="https://cdn.tailwindcss.com"></script>

<section class="bg-gradient-to-br from-emerald-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-slate-900 py-20">
  <div class="max-w-3xl mx-auto px-4 text-center">
    <div class="rounded-3xl border border-emerald-200 bg-white/90 shadow-xl shadow-emerald-200/50 p-10 dark:border-emerald-500/20 dark:bg-gray-900/80 dark:shadow-emerald-900/30">
      <div class="mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-emerald-500 text-white">
        <svg class="h-8 w-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
      </div>
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Booking submitted!</h1>
      <p class="mt-2 text-gray-600 dark:text-gray-300">Thanks {{ booking.full_name }}. Our team will reach out shortly to confirm your ride and arrange transfers if needed.</p>

      <div class="mt-8 overflow-hidden rounded-2xl border border-gray-200 bg-white text-left shadow-sm dark:border-gray-700 dark:bg-gray-900">
        <div class="border-b border-gray-200 px-6 py-4 text-sm text-gray-600 dark:border-gray-800 dark:text-gray-300">
          <p><span class="font-semibold text-gray-900 dark:text-white">Ride date:</span> {{ booking.ride_date }}{% if booking.ride_time %} ({{ booking.get_ride_time_display }}){% endif %}</p>
          <p><span class="font-semibold text-gray-900 dark:text-white">Phone:</span> {{ booking.phone }}</p>
          {% if booking.pickup_place %}<p><span class="font-semibold text-gray-900 dark:text-white">Pickup:</span> {{ booking.pickup_place }}</p>{% endif %}
        </div>
        <div class="px-6 py-5">
          <h2 class="text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400">Summary</h2>
          <table class="mt-3 w-full text-sm text-gray-700 dark:text-gray-200">
            <thead class="text-xs uppercase text-gray-500 dark:text-gray-400">
              <tr>
                <th class="pb-2 text-left">Program</th>
                <th class="pb-2 text-left">Type</th>
                <th class="pb-2 text-left">Age</th>
                <th class="pb-2 text-right">Qty</th>
                <th class="pb-2 text-right">Unit</th>
                <th class="pb-2 text-right">Line</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-800">
              {% for item in booking.items.all %}
              <tr>
                <td class="py-2">{{ item.program.name }}</td>
                <td class="py-2">{{ item.get_participant_type_display }}</td>
                <td class="py-2">{{ item.get_age_group_display }}</td>
                <td class="py-2 text-right">{{ item.quantity }}</td>
                <td class="py-2 text-right">{{ item.unit_price|floatformat:0 }} THB</td>
                <td class="py-2 text-right font-semibold">{{ item.line_total|floatformat:0 }} THB</td>
              </tr>
              {% empty %}
              <tr><td colspan="6" class="py-4 text-center text-gray-500 dark:text-gray-400">No items.</td></tr>
              {% endfor %}
            </tbody>
          </table>
          <div class="mt-4 flex items-center justify-between text-lg font-semibold text-gray-900 dark:text-white">
            <span>Total</span>
            <span>{{ booking.total_amount|floatformat:0 }} THB</span>
          </div>
        </div>
      </div>

      <div class="mt-8 flex flex-wrap items-center justify-center gap-3">
        <a href="{% url 'home' %}" class="inline-flex items-center rounded-full bg-blue-600 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-blue-600/40 transition hover:bg-blue-700">Go to home page</a>
        {% if user.is_staff or user.is_superuser %}
        <a href="{% url 'admin-booking-create' %}" class="inline-flex items-center rounded-full border border-gray-300 px-6 py-3 text-sm font-semibold text-gray-800 transition hover:bg-gray-100 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700">Create another booking</a>
        <a href="{% url 'booking-list-page' %}" class="inline-flex items-center rounded-full border border-gray-300 px-6 py-3 text-sm font-semibold text-gray-800 transition hover:bg-gray-100 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700">View all bookings</a>
        {% endif %}
      </div>
    </div>
  </div>
</section>
{% endblock content %}
